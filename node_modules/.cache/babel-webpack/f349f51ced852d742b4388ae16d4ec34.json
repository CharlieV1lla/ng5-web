{"ast":null,"code":"import { trigger, style, transition, animate, keyframes, query, stagger } from '@angular/animations';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../data.service\";\nimport * as i2 from \"../graphql.products.service\";\nimport * as i3 from \"../graphql.users.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\n\nfunction HomeComponent_p_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p\", 10);\n    i0.ɵɵlistener(\"click\", function HomeComponent_p_18_Template_p_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const i_r2 = restoredCtx.index;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.removeItem(i_r2);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const goal_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", goal_r1.description, \" \");\n  }\n}\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(_data, graphqlProductsService, graphqlUsersService) {\n      this._data = _data;\n      this.graphqlProductsService = graphqlProductsService;\n      this.graphqlUsersService = graphqlUsersService;\n      this.itemCount = 0;\n      this.btnText = 'Add item';\n      this.goalText = 'My first life goal';\n      this.user = \"\";\n      this.pass = \"\";\n      this.token = \"\";\n      this.loading = false;\n      this.querySubscription = new Subscription();\n      this.goals = [];\n    }\n\n    ngOnInit() {\n      this.itemCount = this.goals.length;\n      /*\r\n      this._data.goal.subscribe(res => this.goals = res);\r\n      this.itemCount = this.goals.length;\r\n      this._data.changeGoal(this.goals);\r\n      */\n\n      this.querySubscription = this.graphqlProductsService.links(\"-\").valueChanges.subscribe(({\n        data,\n        loading\n      }) => {\n        this.loading = loading;\n        this.goals = JSON.parse(JSON.stringify(data)).links;\n        console.log(JSON.stringify(this.goals));\n      });\n    }\n\n    loginUser() {\n      alert(this.user + \" - \" + this.pass);\n      this.graphqlUsersService.tokenAuth(this.user, this.pass).subscribe(({\n        data\n      }) => {\n        console.log('logged: ', JSON.stringify(data)); // this.storageService.setSession(\"token\", JSON.parse(JSON.stringify(data)).tokenAuth.token);\n        //this.storageService.setLocal(\"token\", JSON.parse(JSON.stringify(data)).tokenAuth.token);\n\n        this.token = JSON.parse(JSON.stringify(data)).tokenAuth.token; //this.loginService.showData(mydata);\n        // this.router.navigate(['/']);\n      }, error => {\n        console.log('there was an error sending the query', error);\n      });\n    }\n\n    addItem() {\n      //this.goals.push(this.goalText);\n      var mytoken = \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6ImFkc29mdCIsImV4cCI6MTYzNDc5NTgwMiwib3JpZ0lhdCI6MTYzNDc5NTUwMn0._6tOsFeS7Li59toIpxyD1rDNi_HXnjvcDPBjoKXNcUk\"; //this.storageService.getSession(\"token\");\n\n      alert(this.goalText);\n      this.graphqlProductsService.createLink(mytoken, \"https://www.github.com\", this.goalText).subscribe(({\n        data\n      }) => {\n        console.log('link created :  ', data);\n      }, error => {\n        console.log('there was an error sending the query', error);\n      });\n      this.goalText = '';\n      this.itemCount = this.goals.length;\n\n      this._data.changeGoal(this.goals);\n    }\n\n    removeItem(i) {\n      this.goals.splice(i, 1);\n\n      this._data.changeGoal(this.goals);\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.GraphqlProductsService), i0.ɵɵdirectiveInject(i3.GraphqlUsersService));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 19,\n    vars: 7,\n    consts: [[1, \"container\", \"color-dark\"], [1, \"col\"], [\"type\", \"text\", \"name\", \"item\", \"placeholder\", \"user\", 1, \"txt1\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"item\", \"placeholder\", \"pass\", 1, \"txt1\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", \"value\", \"login\", 1, \"btn1\", 3, \"click\"], [1, \"container\", \"color-light\"], [1, \"sm\"], [\"type\", \"text\", \"name\", \"item\", \"placeholder\", \"Life goal..\", 1, \"txt\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", 3, \"value\", \"click\"], [\"class\", \"life-container\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"life-container\", 3, \"click\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"p\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 1);\n        i0.ɵɵelementStart(5, \"form\");\n        i0.ɵɵelementStart(6, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_6_listener($event) {\n          return ctx.user = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.pass = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"input\", 4);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_input_click_8_listener() {\n          return ctx.loginUser();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 5);\n        i0.ɵɵelementStart(11, \"div\", 1);\n        i0.ɵɵelementStart(12, \"p\", 6);\n        i0.ɵɵtext(13, \" Use this form below to add a new bucket list gols \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"form\");\n        i0.ɵɵelementStart(15, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.goalText = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 8);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_input_click_16_listener() {\n          return ctx.addItem();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 1);\n        i0.ɵɵtemplate(18, HomeComponent_p_18_Template, 2, 1, \"p\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" Add a bucket list item - Your bucket list ( \", ctx.itemCount, \" ) \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.user);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.pass);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.token, \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.goalText);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.btnText);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.goals);\n      }\n    },\n    directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.NgForOf],\n    styles: [\".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% auto}.col[_ngcontent-%COMP%]{padding:.4em 1.3em}.color-dark[_ngcontent-%COMP%]{background:#2885C4}.color-light[_ngcontent-%COMP%]{background:#57B3F1}input.txt[_ngcontent-%COMP%]{border:0;padding:1em;width:80%;margin-bottom:2em}input.btn[_ngcontent-%COMP%]{border:0;display:block;padding:1em 3em;background:#A5F883;color:#003a61;margin-bottom:1em;cursor:pointer}.life-container[_ngcontent-%COMP%]{background:#3FA0E1;padding:.5em;font-weight:bold;cursor:pointer}\"],\n    data: {\n      animation: [trigger('goals', [transition('* => *', [query(':enter', style({\n        opacity: 0\n      }), {\n        optional: true\n      }), query(':enter', stagger('300ms', [animate('.6s ease-in', keyframes([style({\n        opacity: 0,\n        transform: 'translateY(-75%)',\n        offset: 0\n      }), style({\n        opacity: .5,\n        transform: 'translateY(35px)',\n        offset: .3\n      }), style({\n        opacity: 1,\n        transform: 'translateY(0)',\n        offset: 1\n      })]))]), {\n        optional: true\n      }) //query(':leave', stagger('300ms', [\n      //animate('.6s ease-in', keyframes([\n      //style({opacity: 1, transform: 'translateY(0)', offset: 0}),\n      //style({opacity: .5, transform: 'translateY(35px)', offset: .3}),\n      //style({opacity: 0, transform: 'translateY(-75%)', offset: 1}),\n      //]))]), {optional: true})\n      ])])]\n    }\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}